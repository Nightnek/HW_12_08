# 12_08 Стасенко Григорий Домашнее задание к занятию «Резервное копирование баз данных. Часть 2» 12_08

## Задание 1. Резервное копирование
Кейс
Финансовая компания решила увеличить надёжность работы баз данных и их резервного копирования.

Необходимо описать, какие варианты резервного копирования подходят в случаях:

1.1. Необходимо восстанавливать данные в полном объёме за предыдущий день.

1.2. Необходимо восстанавливать данные за час до предполагаемой поломки.

1.3.* Возможен ли кейс, когда при поломке базы происходило моментальное переключение на работающую или починенную базу данных.

Приведите ответ в свободной форме.

````
 1.1. В данном случае эффективной будет следующая схема резервного копирования:
      Раз в неделю делается полное резервное копирование и после 0:00 инкрементальный бекап.
      Данная схема позволит нам восстановить данные в полном объеме за любой прошедший день. 

 1.2. В данном случае эффективной будет следующая схема резервного копирования:
      Раз в неделю делается полное резервное копирование и после 0:00 инкрементальный бекап, а так же ведется журнал изменений.
      Данная схема позволит нам восстановить все данные вплодь до места сбоя.

 1.3.* Такой кейс возможен, если у нас есть постоянно работающая репликация.
      Например в режиме Master-Slave или Master-Master, но при условии поломки "железной" части.
      Мы можем настроить репликацию и мониторинг состояния со сценарием переключения.
      При обнаружении сбоя в работе оборудования, сбойная БД отключается, а место нее становится доступна исправная.
      Slave становится Master до восстановления Master.
      Однако, если сбой вызван повреждением данных из БД, мы потеряем сразу и Master, и Slave.

````
---

## Задание 2. PostgreSQL
2.1. С помощью официальной документации приведите пример команды резервирования данных и восстановления БД (pgdump/pgrestore).

2.1.* Возможно ли автоматизировать этот процесс? Если да, то как?

Приведите ответ в свободной форме.

````
2.1. pg_dump -Fc sakila > sakila.dump
     pg_restore -d sakila sakila.dump

2.1.* Возможно создать хранимые процедуры, которые будут запускаться по расписанию.
      Или Bash\Python скриптом.

````
---

## Задание 3. MySQL
3.1. С помощью официальной документации приведите пример команды инкрементного резервного копирования базы данных MySQL.

3.1.* В каких случаях использование реплики будет давать преимущество по сравнению с обычным резервным копированием?

Приведите ответ в свободной форме.

````
3.1. mysqldump --flush-logs 

3.1.* Только в случае выхода из строя основного сервера.
      Можно использовать реплику для резервного копирования БД без остановки операций.
      Однако, к моменту окончания копирования данные уже будут неактуальны.

````
---
